{% load static %}

<nav class="erp-bottom-nav">
    <!-- Izquierda: icono casa y notificaciones -->
    <div class="bottom-item bottom-left-group">
        <div class="nav-item">
            <button type="button" class="nav-btn" aria-label="Inicio">
                <i class="fas fa-home"></i>
            </button>
            <span class="nav-label">Inicio</span>
        </div>
        <div class="nav-item">
            <button type="button" class="nav-btn" aria-label="Notificaciones">
                <i class="fas fa-bell"></i>
            </button>
            <span class="nav-label">Alertas</span>
        </div>
    </div>

    <!-- Centro: botón módulos -->
    <div class="bottom-item bottom-center" id="openDrawer" role="button" tabindex="0" aria-label="Menú principal">
        <div class="logo-wrap">
            <img src="{% static 'erp/img/logo_movil.svg' %}" alt="Logo app móvil" class="bottom-logo" draggable="false" />
        </div>
    </div>

    <!-- Derecha: icono SVG y avatar usuario -->
    <div class="bottom-item bottom-right-group">
        <div class="nav-item">
            <button type="button" class="nav-btn" aria-label="Pallet">
                <!-- Inlined SVG so its fill/color can be controlled via CSS -->
                <svg class="icono-derecha-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 455.21 471.68" aria-hidden="true" focusable="false">
                    <defs><style>.cls-1{fill:currentColor;}</style></defs>
                    <path class="cls-1" d="M595.6,585.22,745.38,431.69a118,118,0,0,0,14-21.79c12.27-24.78,13-48.33,12.26-62L566.93,554.24,361,347.94a115.6,115.6,0,0,0,11.24,58.56,111.24,111.24,0,0,0,17,25.19L539.43,585.22a112.28,112.28,0,0,1,27.5,47.32,125.35,125.35,0,0,1,28.67-47.32Z" transform="translate(-339.95 -331.07)"/>
                    <path class="cls-1" d="M477.81,433.22l89.12,89.11,89.35-89.11c-9.84-7.47-44.19-31.63-93.71-30.13A148.78,148.78,0,0,0,477.81,433.22Z" transform="translate(-339.95 -331.07)"/>
                    <path class="cls-1" d="M425.72,381.39l19.41,19.66c12.8-10.18,56.29-42.14,120.51-42.64,66.11-.51,111,32.65,123.57,42.64l20.17-19.66c-14.14-11.44-67-51.4-145-50.3C490.29,332.14,440.38,369.53,425.72,381.39Z" transform="translate(-339.95 -331.07)"/>
                    <path class="cls-1" d="M719.06,491.94l-36.51,36.51c16.54,18.07,16.4,45.87.26,63.32-16.86,18.22-46.2,19.78-65.36,2.81a66.16,66.16,0,0,0-7.66,7.15,67,67,0,0,0-9.19,12.77l-34,70.72q-16.6-35.36-33.2-70.72a75.24,75.24,0,0,0-9.2-12,74.33,74.33,0,0,0-8.68-7.92c-16.76,13.7-38.88,16.62-54.38,7.66-21.28-12.3-29.52-46.7-10.47-73.79l-36.51-36.51c-3,6.45-37.06,84,8.51,159.66,47.82,79.37,138.54,82.31,144,82.39,6.93,0,91.6-1.65,140.55-74.56C759.81,581.26,721,496,719.06,491.94Z" transform="translate(-339.95 -331.07)"/>
                    <path class="cls-1" d="M763.77,446.24l-18.38,20.94c5.38,10.17,47.22,92.6,7.49,180.51-32,70.8-104.34,117.32-185.49,119.49-7.74,0-112-2.58-169.91-92.43-40-62-42.58-141.82-6.9-207.57l-19.4-20.94c-42.24,73.59-41.62,164.22,1.78,236.17,64.43,106.81,186.45,111.65,194.43,111.83,15.76-.11,110.29-2.28,174.77-77.11C803.56,645.88,812.74,537.68,763.77,446.24Z" transform="translate(-339.95 -331.07)"/>
                    <polyline class="cls-1" points="39.35 361.25 12.58 471.68 118.27 432.29"/>
                </svg>
            </button>
            <span class="nav-label">Pallet</span>
        </div>
        <div class="nav-item">
            <button type="button" class="nav-btn user-menu-btn" aria-label="Perfil" aria-expanded="false" aria-controls="userMenuRibbon">
                <img src="{% if user.profile.avatar %}{{ user.profile.avatar.url }}{% else %}{% static 'erp/img/avatar_default.svg' %}{% endif %}" alt="Avatar usuario" class="avatar-usuario" />
            </button>
            <span class="nav-label">Perfil</span>
        </div>
    </div>
</nav>

<!-- Menú desplegable para el avatar (ribbon) -->
<div class="user-menu-ribbon" id="userMenuRibbon" aria-hidden="true">
    <a href="{% url 'accounts:profile' %}" class="user-menu-item">Perfil</a>
    <a href="{% url 'core:welcome' %}" class="user-menu-item">Empresas</a>
</div>

<div class="erp-drawer" id="drawer">
    <div class="drawer-handle"></div>

    <div class="drawer-header">
        <span>Módulos</span>

    </div>

    <div class="drawer-grid">
        <div class="drawer-item"><i class="fas fa-truck"></i><span>Transporte</span></div>
        <div class="drawer-item"><i class="fas fa-chart-line"></i><span>Reportes</span></div>
        <div class="drawer-item"><i class="fas fa-warehouse"></i><span>Almacenes</span></div>
        <div class="drawer-item"><i class="fas fa-user-shield"></i><span>Usuarios</span></div>
        <div class="drawer-item"><i class="fas fa-cog"></i><span>Configuración</span></div>
    </div>
</div>

<div class="drawer-overlay" id="drawerOverlay"></div>
